<!-- Version 062025 -->
<head>
    <style>
        /* latin */
        @font-face {
            font-family: 'Quantico';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: url(https://fonts.gstatic.com/s/quantico/v17/rax-HiSdp9cPL3KIF7xrJD0.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>
    <title>Helldivers Stratagem Trainer</title>
</head>

<body style="background-color: #525150;" onload="init()">
    <canvas id="my_canvas" width="480" height="320" style="background-color:#363434; display: block; margin: auto; margin-top: 50px;"></canvas>
    <p>ver. 2026.02.24</p>
</body>


<script>
//***********************//
//       Variable        //
//***********************//

//canvas
const canvas = document.getElementById('my_canvas');
const ctx = canvas.getContext("2d");

//Arrow icon
var img_arrows = [];
img_arrows[0] = new Image();
img_arrows[0].src = "https://helldivers.wiki.gg/images/Stratagem_Arrow_Up.svg";
img_arrows[1] = new Image();
img_arrows[1].src = "https://helldivers.wiki.gg/images/Stratagem_Arrow_Down.svg";
img_arrows[2] = new Image();
img_arrows[2].src = "https://helldivers.wiki.gg/images/Stratagem_Arrow_Left.svg";
img_arrows[3] = new Image();
img_arrows[3].src = "https://helldivers.wiki.gg/images/Stratagem_Arrow_Right.svg";

//stratagem 87=W,65=A,83=S,68=D
const stratagems = [
{name: "MG-43 Machine Gun", path: "Machine_Gun_Stratagem_Icon.svg", sequence: [83,65,83,87,68]},
{name: "APW-1 Anti-Materiel Rifle", path: "Anti-Materiel_Rifle_Stratagem_Icon.svg", sequence: [83,65,68,87,83]},
{name: "M-105 Stalwart", path: "Stalwart_Stratagem_Icon.svg", sequence: [83,65,83,87,87,65]},
{name: "EAT-17 Expendable Anti-Tank", path: "Expendable_Anti-Tank_Stratagem_Icon.svg", sequence: [83,83,65,87,68]},
{name: "GR-8 Recoilless Rifle", path: "Recoilless_Rifle_Stratagem_Icon.svg", sequence: [83,65,68,68,65]},
{name: "FLAM-40 Flamethrower", path: "Flamethrower_Stratagem_Icon.svg", sequence: [83,65,87,83,87]},
{name: "AC-8 Autocannon", path: "Autocannon_Stratagem_Icon.svg", sequence: [83,65,83,87,87,68]},
{name: "MG-206 Heavy Machine Gun", path: "Heavy_Machine_Gun_Stratagem_Icon.svg", sequence: [83,65,87,83,83]},
{name: "RL-77 Airburst Rocket Launcher", path: "RL-77_Airburst_Rocket_Launcher_Stratagem_Icon.svg", sequence: [83,87,87,65,68]},
{name: "MLS-4X Commando", path: "Commando_Stratagem_Icon.svg", sequence: [83,65,87,83,68]},
{name: "RS-422 Railgun", path: "Railgun_Stratagem_Icon.svg", sequence: [83,68,83,87,65,68]},
{name: "FAF-14 Spear", path: "Spear_Stratagem_Icon.svg", sequence: [83,83,87,83,83]},
{name: "StA-X3 W.A.S.P. Launcher", path: "StA-X3_W.A.S.P._Launcher_Stratagem_Icon.svg", sequence: [83,83,87,83,68]},
{name: "Orbital Gatling Barrage", path: "Orbital_Gatling_Barrage_Stratagem_Icon.svg", sequence: [68,83,65,87,87]},
{name: "Orbital Airburst Strike", path: "Orbital_Airburst_Strike_Stratagem_Icon.svg", sequence: [68,68,68]},
{name: "Orbital 120mm HE Barrage", path: "Orbital_120mm_HE_Barrage_Stratagem_Icon.svg", sequence: [68,68,83,65,68,83]},
{name: "Orbital 380mm HE Barrage", path: "Orbital_380mm_HE_Barrage_Stratagem_Icon.svg", sequence: [68,83,87,87,65,83,83]},
{name: "Orbital Walking Barrage", path: "Orbital_Walking_Barrage_Stratagem_Icon.svg", sequence: [68,83,68,83,68,83]},
{name: "Orbital Laser", path: "Orbital_Laser_Stratagem_Icon.svg", sequence: [68,83,87,68,83]},
{name: "Orbital Napalm Barrage", path: "Orbital_Napalm_Barrage_Stratagem_Icon.svg", sequence: [68,68,83,65,68,87]},
{name: "Orbital Railcannon Strike", path: "Orbital_Railcannon_Strike_Stratagem_Icon.svg", sequence: [68,87,83,83,68]},
{name: "Eagle Strafing Run", path: "Eagle_Strafing_Run_Stratagem_Icon.svg", sequence: [87,68,68]},
{name: "Eagle Airstrike", path: "Eagle_Airstrike_Stratagem_Icon.svg", sequence: [87,68,83,68]},
{name: "Eagle Cluster Bomb", path: "Eagle_Cluster_Bomb_Stratagem_Icon.svg", sequence: [87,68,83,83,68]},
{name: "Eagle Napalm Airstrike", path: "Eagle_Napalm_Airstrike_Stratagem_Icon.svg", sequence: [87,68,83,87]},
{name: "LIFT-850 Jump Pack", path: "Jump_Pack_Stratagem_Icon.svg", sequence: [83,87,87,83,87]},
{name: "Eagle Smoke Strike", path: "Eagle_Smoke_Strike_Stratagem_Icon.svg", sequence: [87,68,87,83]},
{name: "Eagle 110mm Rocket Pods", path: "Eagle_110mm_Rocket_Pods_Stratagem_Icon.svg", sequence: [87,68,87,65]},
{name: "Eagle 500kg Bomb", path: "Eagle_500kg_Bomb_Stratagem_Icon.svg", sequence: [87,68,83,83,83]},
{name: "M-102 Fast Recon Vehicle", path: "Fast_Recon_Vehicle_Stratagem_Icon.svg", sequence: [65,83,68,83,68,83,87]},
{name: "Orbital Precision Strike", path: "Orbital_Precision_Strike_Stratagem_Icon.svg", sequence: [68,68,87]},
{name: "Orbital Gas Strike", path: "Orbital_Gas_Strike_Stratagem_Icon.svg", sequence: [68,68,83,68]},
{name: "Orbital EMS Strike", path: "Orbital_EMS_Strike_Stratagem_Icon.svg", sequence: [68,68,65,83]},
{name: "Orbital Smoke Strike", path: "Orbital_Smoke_Strike_Stratagem_Icon.svg", sequence: [68,68,83,87]},
{name: "E/MG-101 HMG Emplacement", path: "HMG_Emplacement_Stratagem_Icon.svg", sequence: [83,87,65,68,68,65]},
{name: "FX-12 Shield Generator Relay", path: "Shield_Generator_Relay_Stratagem_Icon.svg", sequence: [83,83,65,68,65,68]},
{name: "A/ARC-3 Tesla Tower", path: "Tesla_Tower_Stratagem_Icon.svg", sequence: [83,87,68,87,65,68]},
{name: "E/GL-21 Grenadier Battlement", path: "GL-21_Grenadier_Battlement_Stratagem_Icon.svg", sequence: [83,68,83,65,68]},
{name: "MD-6 Anti-Personnel Minefield", path: "Anti-Personnel_Minefield_Stratagem_Icon.svg", sequence: [83,65,87,68]},
{name: "B-1 Supply Pack", path: "Supply_Pack_Stratagem_Icon.svg", sequence: [83,65,83,87,87,83]},
{name: "GL-21 Grenade Launcher", path: "Grenade_Launcher_Stratagem_Icon.svg", sequence: [83,65,87,65,83]},
{name: "LAS-98 Laser Cannon", path: "Laser_Cannon_Stratagem_Icon.svg", sequence: [83,65,83,87,65]},
{name: "MD-I4 Incendiary Mines", path: "Incendiary_Mines_Stratagem_Icon.svg", sequence: [83,65,65,83]},
{name: "AX/LAS-5 Guard Dog Rover", path: "Guard_Dog_Rover_Stratagem_Icon.svg", sequence: [83,87,65,87,68,68]},
{name: "SH-20 Ballistic Shield Backpack", path: "Ballistic_Shield_Backpack_Stratagem_Icon.svg", sequence: [83,65,83,83,87,65]},
{name: "ARC-3 Arc Thrower", path: "Arc_Thrower_Stratagem_Icon.svg", sequence: [83,68,83,87,65,65]},
{name: "MD-17 Anti-Tank Mines", path: "MD-17_Anti-Tank_Mines_Stratagem_Icon.svg", sequence: [83,65,87,87]},
{name: "LAS-99 Quasar Cannon", path: "Quasar_Cannon_Stratagem_Icon.svg", sequence: [83,83,87,65,68]},
{name: "SH-32 Shield Generator Pack", path: "Shield_Generator_Pack_Stratagem_Icon.svg", sequence: [83,87,65,68,65,68]},
{name: "MD-8 Gas Mines", path: "Gas_Minefield_Stratagem_Icon.svg", sequence: [83,65,65,68]},
{name: "A/MG-43 Machine Gun Sentry", path: "Machine_Gun_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,68,87]},
{name: "A/G-16 Gatling Sentry", path: "Gatling_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,65]},
{name: "A/M-12 Mortar Sentry", path: "Mortar_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,68,83]},
{name: "AX/AR-23 Guard Dog", path: "Guard_Dog_Stratagem_Icon.svg", sequence: [83,87,65,87,68,83]},
{name: "A/AC-8 Autocannon Sentry", path: "Autocannon_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,87,65,87]},
{name: "A/MLS-4X Rocket Sentry", path: "Rocket_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,68,65]},
{name: "A/M-23 EMS Mortar Sentry", path: "AM-23_EMS_Mortar_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,83,68]},
{name: "EXO-45 Patriot Exosuit", path: "EXO-45_Patriot_Exosuit_Stratagem_Icon.svg", sequence: [65,83,68,87,65,83,83]},
{name: "EXO-49 Emancipator Exosuit", path: "EXO-49_Emancipator_Exosuit_Stratagem_Icon.svg", sequence: [65,83,68,87,65,83,87]},
{name: "AX/ARC-3 \"Guard Dog\" K-9", path: "AX_ARC-3_\"Guard_Dog\"_K-9_Stratagem_Icon.svg", sequence: [83,87,65,87,68,65]},
{name: "TX-41 Sterilizer", path: "Sterilizer_Stratagem_Icon.svg", sequence: [83,65,87,83,65]},
{name: "AX/TX-13 Guard Dog Dog Breath", path: "Guard_Dog_Dog_Breath_Stratagem_Icon.svg", sequence: [83,87,65,87,68,87]},
{name: "SH-51 Directional Shield", path: "SH-51_Directional_Shield_Stratagem_Icon.svg", sequence: [83,87,65,68,87,87]},
{name: "E/AT-12 Anti-Tank Emplacement", path: "E_AT-12_Anti-Tank_Emplacement_Stratagem_Icon.svg", sequence: [83,87,65,68,68,68]},
{name: "A/FLAM-40 Flame Sentry", path: "A_FLAM-40_Flame_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,83,87,87]},
{name: "B-100 Portable Hellbomb", path: "Portable_Hellbomb_Stratagem_Icon.svg", sequence: [83,68,87,87,87]},
{name: "LIFT-860 Hover Pack", path: "Hover_Pack_Stratagem_Icon.svg", sequence: [83,87,87,83,65,68]},
{name: "CQC-1 One True Flag", path: "CQC-1_One_True_Flag_Stratagem_Icon.svg", sequence: [83,65,68,68,87]},
{name: "GL-52 De-Escalator", path: "GL-52_De-Escalator_Stratagem_Icon.svg", sequence: [65,68,87,65,68]},
{name: "AX/ARC-3 \"Guard Dog\" K-9", path: "AX_ARC-3_\"Guard_Dog\"_K-9_Stratagem_Icon.svg", sequence: [83,87,65,87,68,65]},
{name: "A/LAS-98 Laser Sentry", path: "A_LAS-98_Laser_Sentry_Stratagem_Icon.svg", sequence: [83,87,68,83,87,68]},
{name: "LIFT-182 Warp Pack", path: "LIFT-182_Warp_Pack_Stratagem_Icon.svg", sequence: [83,65,68,83,65,68]},
{name: "Reinforce", path: "Reinforce_Stratagem_Icon.svg", sequence: [87,83,68,65,87]},
{name: "Resupply", path: "Resupply_Stratagem_Icon.svg", sequence: [83,83,87,68]},
{name: "Hellbomb", path: "Hellbomb_Stratagem_Icon.svg", sequence: [83,87,65,83,87,68,83,87]}
];


//***********************//
//      Controller       //
//***********************//

// Generate the logical arrows array
var arrows = [];
var cols = [];

function genArrow(stra_index) {
    arrows = [];
    stratagems[stra_index].sequence.forEach(function(value,i) {
        arrows[i] = {key: value, state: false};
    })

    // Gen arrow x position
    let min = canvas.width/2 - ((arrows.length/2) * 30);
    for (let i=0; i < arrows.length; i++) {
        cols[i] = min + (i * 30);
    }

    drawArrow();

}

// Generate countdown bar
const maxProgress = 100; // 100%
const animateDuration = 2000; // milliseconds
let progress = 0;
let animateStarttime = null;

function animateCountdownBar(timestamp) {
    if (!animateStarttime) animateStarttime = timestamp;
    let elapsed = timestamp - animateStarttime;

    // Choose min value between maxProgress and elapsed time
    progress = Math.min((elapsed / animateDuration) * maxProgress, maxProgress);
    drawCountdownBar();

    if (progress < maxProgress) {
        requestAnimationFrame(animateCountdownBar);
    } 
}

//***********************//
//      Rendering        //
//***********************//

// Draw arrow icon
function drawArrow() {

    arrows.forEach(function(arrow,i) {
        
        // Brighter if correct
        if (arrow.state) {
            ctx.filter = "brightness(110%)";
        } else {
            ctx.filter = "brightness(75%)";
        }   
        
        // Draw arrow based on direction
        if (arrow.key == 87) {
            ctx.drawImage(img_arrows[0],cols[i],(canvas.height/2)+35,25,25);
        } else if (arrow.key == 83) {
            ctx.drawImage(img_arrows[1],cols[i],(canvas.height/2)+35,25,25);
        } else if (arrow.key == 65) {
            ctx.drawImage(img_arrows[2],cols[i],(canvas.height/2)+35,25,25);
        } else if (arrow.key == 68) {
            ctx.drawImage(img_arrows[3],cols[i],(canvas.height/2)+35,25,25);
        }
    })
}


// Draw Stratagem title and icon 
function drawTitleAndIcon(stra_index) {
    
    // Wipe out all canvas
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.filter = "brightness(100%)";

    // Stra name
    ctx.font = "20px Quantico";
    ctx.textAlign = "center";
    ctx.fillStyle = "#e5e5e5";
    ctx.fillText(stratagems[stra_index].name.toUpperCase(), canvas.width/2, (canvas.height/4));
    
    // Stra icon
    let img_icon = new Image();
    img_icon.onload = function() {
        ctx.drawImage(img_icon,canvas.width/2-37.5, canvas.height/2-57.5,75,75);
    }
    img_icon.src = "https://helldivers.wiki.gg/images/" + stratagems[stra_index].path;
}

// Draw score
var success = 0;
var failure = 0;

function drawScore() {
    ctx.filter = "brightness(100%)";
    ctx.font = "14px Quantico";
    ctx.textAlign = "left";
    ctx.fillText("Success: " + success + "  Failure: " + failure, 10, 20);
}

//Draw countdown bar
const barWidth = 250;
const barHeight = 5;

function drawCountdownBar() {
    ctx.filter = "brightness(80%)";
    if (progress < maxProgress) {
        ctx.fillStyle = "#e5e5e5"; // Green for success
    } else {
        ctx.fillStyle = "#f57373"; // Red for failure
    }
    ctx.fillRect(canvas.width/2-125, canvas.height/2+100, (progress/maxProgress) * barWidth, barHeight);
}

//***********************//
//       Handling        //
//***********************//

// Listen key down event
document.addEventListener("keydown", keydownHandler ,false);
function keydownHandler(e) {

    for (i=0; i<arrows.length; i++) {
        // Ignore corrected
        if (arrows[i].state) {
            continue;
        }
        // Correct, next turn
        if (arrows[i].key == e.keyCode) {
            arrows[i].state = true;
            drawArrow();
            break;
        }
        // Wrong, reset key state
        else {
            arrows.forEach(function(arrow){
                arrow.state = false;
            })
            drawArrow();
            break;
        }
    }

    // Finished, new game
    if (arrows[arrows.length-1].state) {
        if (progress < maxProgress) {
            success++; 
        } else {
            failure++;
        }
        startGame();
    }
}

// Game Control
function startGame() {
    // Random pick
    rand = Math.floor(Math.random() * stratagems.length);
    drawTitleAndIcon(rand);
    genArrow(rand);

    drawScore();

    // Start countdown
    progress = 0;
    animateStarttime = null;
    requestAnimationFrame(animateCountdownBar);
}

// Initial setup
function init() {
    // Assure font loaded
    const fontFile = new FontFace(
        "FontFamily Quantico",
        "url(https://fonts.gstatic.com/s/quantico/v17/rax-HiSdp9cPL3KIF7xrJD0.woff2)"
    );
    document.fonts.add(fontFile);
    fontFile.load().then( () => {
        startGame();
    })
}


</script>